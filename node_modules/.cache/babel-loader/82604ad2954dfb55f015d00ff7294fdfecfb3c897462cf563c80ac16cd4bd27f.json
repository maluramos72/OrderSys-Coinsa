{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Malu\\\\Downloads\\\\OrderSys-Coinsa\\\\src\\\\components\\\\order-management-system.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Papa from \"papaparse\";\nimport html2canvas from \"html2canvas\";\nimport ExcelJS from \"exceljs\";\nimport { saveAs } from \"file-saver\";\nimport { ShoppingCart, Save, Trash2, Eye, Plus, FileText, User, ChevronLeft, ChevronRight } from \"lucide-react\";\n\n/* ===========================\n  Interfaces / Types\n   =========================== */\n\n/* ===========================\n  Helper components\n   =========================== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductPreview = ({\n  product,\n  color,\n  logo,\n  logoPos,\n  imageUrl,\n  onClickPosition,\n  id\n}) => {\n  // fixed box size used for html2canvas capture consistency\n  const width = 400;\n  const height = 400;\n  if (!product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"Selecciona un producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: id,\n    onClick: onClickPosition,\n    style: {\n      width,\n      height,\n      backgroundColor: color,\n      borderRadius: 8,\n      position: \"relative\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      overflow: \"hidden\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageUrl || product.image,\n      alt: product.name,\n      style: {\n        maxWidth: \"100%\",\n        maxHeight: \"100%\",\n        objectFit: \"contain\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), logo && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      style: {\n        position: \"absolute\",\n        left: logoPos.x,\n        top: logoPos.y,\n        width: 80,\n        height: 80,\n        transform: \"translate(-50%, -50%)\",\n        pointerEvents: \"none\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n/* ===========================\n  Main component\n   =========================== */\n_c = ProductPreview;\nconst OrderManagementSystem = () => {\n  _s();\n  // Products / UI state\n  const [products, setProducts] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [selectedSize, setSelectedSize] = useState(\"M\");\n  const [quantity, setQuantity] = useState(1);\n\n  // Logo & position editing (for preview before adding)\n  const [logoFile, setLogoFile] = useState(null);\n  const [logoPosition, setLogoPosition] = useState({\n    x: 200,\n    y: 200\n  }); // px inside preview box\n\n  // Order items and customer\n  const [orderItems, setOrderItems] = useState([]);\n  const [customerInfo, setCustomerInfo] = useState({\n    companyName: \"\",\n    contact: \"\",\n    phone: \"\",\n    email: \"\",\n    deliveryDate: \"\"\n  });\n\n  // Simple dashboard numbers\n  const [ordersStats] = useState({\n    pending: 12,\n    inProcess: 8,\n    completed: 45\n  });\n\n  /* ---------------------------\n    Load products from CSV\n    CSV must be in public/products.csv\n    columns: name,basePrice,image,type (image like /images/shirt.png)\n     --------------------------- */\n  useEffect(() => {\n    fetch(\"/products.csv\").then(r => r.text()).then(csvText => {\n      Papa.parse(csvText, {\n        header: true,\n        skipEmptyLines: true,\n        complete: result => {\n          const parsed = result.data;\n          const prods = parsed.map((row, i) => ({\n            id: i + 1,\n            name: row.name || row.product || `Producto ${i + 1}`,\n            basePrice: parseFloat(row.basePrice || row.price || 0),\n            image: row.image || \"/imgs/placeholder.png\",\n            type: row.type || \"\"\n          }));\n          setProducts(prods);\n          if (prods.length > 0) setSelectedProduct(prods[0]);\n        }\n      });\n    }).catch(err => {\n      console.warn(\"No se pudo cargar products.csv:\", err);\n    });\n  }, []);\n\n  /* ---------------------------\n    Handlers\n     --------------------------- */\n  const handleLogoUpload = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      setLogoFile(reader.result);\n      // center logo initial\n      setLogoPosition({\n        x: 200,\n        y: 200\n      });\n    };\n    reader.readAsDataURL(f);\n  };\n  const handlePreviewClickPosition = e => {\n    // compute position relative to element\n    const el = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - el.left;\n    const y = e.clientY - el.top;\n    setLogoPosition({\n      x,\n      y\n    });\n  };\n  const handleAddToOrder = () => {\n    if (!selectedProduct) return;\n    const newItem = {\n      id: Date.now(),\n      product: selectedProduct,\n      color: \"#FFFFFF\",\n      size: selectedSize,\n      quantity: quantity > 0 ? quantity : 1,\n      logo: logoFile,\n      logoPosition,\n      subtotal: (quantity > 0 ? quantity : 1) * selectedProduct.basePrice\n    };\n    setOrderItems(prev => [...prev, newItem]);\n    // reset local preview values\n    setLogoFile(null);\n    setLogoPosition({\n      x: 200,\n      y: 200\n    });\n    setQuantity(1);\n    // keep selectedProduct (optional) - left as is for quick add\n  };\n  const updateOrderItem = (id, field, value) => {\n    setOrderItems(prev => prev.map(it => {\n      if (it.id !== id) return it;\n      const updated = {\n        ...it,\n        [field]: value\n      };\n      if (field === \"quantity\") {\n        const q = Number(value) || 0;\n        updated.subtotal = updated.product.basePrice * q;\n        updated.quantity = q;\n      }\n      return updated;\n    }));\n  };\n  const removeOrderItem = id => {\n    setOrderItems(prev => prev.filter(it => it.id !== id));\n  };\n  const getTotalOrder = () => orderItems.reduce((s, it) => s + it.subtotal, 0);\n\n  /* ---------------------------\n    Export helpers: capture previews (html2canvas) and export images + excel\n    This runs entirely in browser: generates image blobs and an Excel workbook,\n    then triggers downloads.\n     --------------------------- */\n\n  // capture a preview element by DOM id and return a Blob (png)\n  const capturePreviewAsBlob = async elementId => {\n    const el = document.getElementById(elementId);\n    if (!el) return null;\n    // use scale for better resolution\n    const canvas = await html2canvas(el, {\n      scale: 2\n    });\n    return await new Promise(resolve => canvas.toBlob(b => resolve(b), \"image/png\"));\n  };\n  const exportOrder = async () => {\n    if (orderItems.length === 0) {\n      alert(\"No puedes guardar una orden sin productos.\");\n      return;\n    }\n\n    // Build order metadata\n    const orderId = Date.now();\n    const now = new Date();\n    const orderMeta = {\n      id: orderId,\n      customer: {\n        ...customerInfo\n      },\n      items: orderItems,\n      total: getTotalOrder(),\n      status: \"Pendiente\",\n      createdAt: now.toISOString()\n    };\n\n    // 1) Capture each item preview and collect blobs\n    const imageFiles = [];\n    for (let i = 0; i < orderItems.length; i++) {\n      const item = orderItems[i];\n      const elementId = `preview-${item.id}`; // each item preview must have this id in DOM\n      const blob = await capturePreviewAsBlob(elementId);\n      if (blob) {\n        const filename = `order-${orderId}-${i + 1}.png`;\n        imageFiles.push({\n          filename,\n          blob\n        });\n        // trigger automatic download of image (so user has copy)\n        saveAs(blob, filename);\n      } else {\n        console.warn(\"No se capturó preview para item\", item.id);\n      }\n    }\n\n    // 2) Build an Excel workbook with order rows\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet(\"Orders\");\n    worksheet.columns = [{\n      header: \"ID\",\n      key: \"id\",\n      width: 18\n    }, {\n      header: \"companyName\",\n      key: \"companyName\",\n      width: 25\n    }, {\n      header: \"contact\",\n      key: \"contact\",\n      width: 20\n    }, {\n      header: \"phone\",\n      key: \"phone\",\n      width: 15\n    }, {\n      header: \"email\",\n      key: \"email\",\n      width: 25\n    }, {\n      header: \"deliveryDate\",\n      key: \"deliveryDate\",\n      width: 18\n    }, {\n      header: \"productName\",\n      key: \"productName\",\n      width: 25\n    }, {\n      header: \"linkImg\",\n      key: \"linkImg\",\n      width: 30\n    }, {\n      header: \"color\",\n      key: \"color\",\n      width: 10\n    }, {\n      header: \"size\",\n      key: \"size\",\n      width: 10\n    }, {\n      header: \"quantity\",\n      key: \"quantity\",\n      width: 10\n    }, {\n      header: \"basePrice\",\n      key: \"basePrice\",\n      width: 12\n    }, {\n      header: \"subtotal\",\n      key: \"subtotal\",\n      width: 12\n    }, {\n      header: \"status\",\n      key: \"status\",\n      width: 12\n    }];\n\n    // Add one row per item\n    orderItems.forEach((item, idx) => {\n      const filename = `order-${orderId}-${idx + 1}.png`;\n      worksheet.addRow({\n        id: `${orderId}-${idx + 1}`,\n        companyName: orderMeta.customer.companyName,\n        contact: orderMeta.customer.contact,\n        phone: orderMeta.customer.phone,\n        email: orderMeta.customer.email,\n        deliveryDate: orderMeta.customer.deliveryDate || \"\",\n        productName: item.product.name,\n        linkImg: filename,\n        // note: since we download locally, this is the filename reference\n        color: item.color,\n        size: item.size,\n        quantity: item.quantity,\n        basePrice: item.product.basePrice,\n        subtotal: item.subtotal,\n        status: orderMeta.status\n      });\n    });\n\n    // 3) Write workbook to buffer and download\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), `orderData-${orderId}.xlsx`);\n\n    // 4) Optionally clear order after save\n    alert(`Orden ${orderId} exportada. Imágenes y Excel descargados en tu carpeta de Descargas.`);\n    setOrderItems([]);\n    setCustomerInfo({\n      companyName: \"\",\n      contact: \"\",\n      phone: \"\",\n      email: \"\",\n      deliveryDate: \"\"\n    });\n  };\n\n  /* ===========================\n    JSX (UI)\n     =========================== */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-100 min-h-screen p-8 font-sans\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-800\",\n          children: \"Sistema de \\xD3rdenes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4 text-sm font-semibold text-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-red-500\",\n              children: ordersStats.pending\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Pendientes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-yellow-500\",\n              children: ordersStats.inProcess\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"En Proceso\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-500\",\n              children: ordersStats.completed\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Completadas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-xl p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-1 bg-gray-50 rounded-lg p-6 shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(User, {\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 17\n              }, this), \"Informaci\\xF3n del Cliente\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Empresa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: customerInfo.companyName,\n                  onChange: e => setCustomerInfo({\n                    ...customerInfo,\n                    companyName: e.target.value\n                  }),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Contacto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: customerInfo.contact,\n                  onChange: e => setCustomerInfo({\n                    ...customerInfo,\n                    contact: e.target.value\n                  }),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Tel\\xE9fono\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"tel\",\n                  value: customerInfo.phone,\n                  onChange: e => setCustomerInfo({\n                    ...customerInfo,\n                    phone: e.target.value\n                  }),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  value: customerInfo.email,\n                  onChange: e => setCustomerInfo({\n                    ...customerInfo,\n                    email: e.target.value\n                  }),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Fecha de entrega\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: customerInfo.deliveryDate,\n                  onChange: e => setCustomerInfo({\n                    ...customerInfo,\n                    deliveryDate: e.target.value\n                  }),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg p-6 shadow-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold mb-4 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 19\n                }, this), \"Selecci\\xF3n del Producto\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (!products.length) return;\n                    const idx = products.findIndex(p => p.id === (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.id));\n                    const newIdx = (idx - 1 + products.length) % products.length;\n                    setSelectedProduct(products[newIdx]);\n                  },\n                  className: \"p-2 rounded bg-gray-100\",\n                  children: /*#__PURE__*/_jsxDEV(ChevronLeft, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1 text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.id) || \"\",\n                    onChange: e => {\n                      const id = Number(e.target.value);\n                      const p = products.find(x => x.id === id) || null;\n                      setSelectedProduct(p);\n                    },\n                    className: \"w-full px-3 py-2 border rounded\",\n                    children: products.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: p.id,\n                      children: [p.name, \" \\u2014 $\", p.basePrice]\n                    }, p.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 487,\n                      columnNumber: 25\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (!products.length) return;\n                    const idx = products.findIndex(p => p.id === (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.id));\n                    const newIdx = (idx + 1) % products.length;\n                    setSelectedProduct(products[newIdx]);\n                  },\n                  className: \"p-2 rounded bg-gray-100\",\n                  children: /*#__PURE__*/_jsxDEV(ChevronRight, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Talla\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: selectedSize,\n                  onChange: e => setSelectedSize(e.target.value),\n                  className: \"w-full px-3 py-2 border rounded\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"XS\",\n                    children: \"XS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"S\",\n                    children: \"S\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"M\",\n                    children: \"M\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 512,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"L\",\n                    children: \"L\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"XL\",\n                    children: \"XL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Cantidad\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: 1,\n                  value: quantity,\n                  onChange: e => setQuantity(Number(e.target.value) || 1),\n                  className: \"w-full px-3 py-2 border rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm block mb-1\",\n                  children: \"Logo del cliente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    accept: \"image/*\",\n                    onChange: handleLogoUpload\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 21\n                  }, this), logoFile && /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: logoFile,\n                    alt: \"logo\",\n                    style: {\n                      width: 40,\n                      height: 40,\n                      objectFit: \"cover\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 34\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 mt-1\",\n                  children: \"Haz clic en la vista previa para posicionar el logo.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleAddToOrder,\n                  className: \"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex items-center justify-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Plus, {\n                    className: \"mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 21\n                  }, this), \" Agregar a la Orden\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg p-6 shadow-lg flex flex-col items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold mb-4 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Eye, {\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 19\n                }, this), \" Vista Previa\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 400,\n                  height: 400\n                },\n                children: /*#__PURE__*/_jsxDEV(ProductPreview, {\n                  product: selectedProduct,\n                  color: \"#FFFFFF\",\n                  logo: logoFile,\n                  logoPos: logoPosition,\n                  onClickPosition: handlePreviewClickPosition,\n                  imageUrl: selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.image,\n                  id: \"preview-selected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold mb-4 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 70\n            }, this), \" Resumen de la Orden\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this), orderItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No hay productos en la orden.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [orderItems.map((it, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-white rounded p-4 shadow\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: `preview-${it.id}`,\n                style: {\n                  width: 120,\n                  height: 120,\n                  marginRight: 12\n                },\n                children: /*#__PURE__*/_jsxDEV(ProductPreview, {\n                  product: it.product,\n                  color: it.color,\n                  logo: it.logo,\n                  logoPos: it.logoPosition,\n                  imageUrl: it.product.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-start\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold\",\n                      children: it.product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 575,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: [\"Talla: \", it.size]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 576,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: [\"Precio: $\", it.product.basePrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 577,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 574,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold\",\n                      children: [\"$\", it.subtotal]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 580,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeOrderItem(it.id),\n                      className: \"text-red-500 mt-2\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 581,\n                        columnNumber: 104\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 581,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 579,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3 flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"text-sm\",\n                    children: \"Cantidad\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 586,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: 1,\n                    value: it.quantity,\n                    onChange: e => updateOrderItem(it.id, \"quantity\", Number(e.target.value) || 1),\n                    className: \"w-20 px-2 py-1 border rounded\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 587,\n                    columnNumber: 25\n                  }, this), it.logo && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-green-600 ml-4\",\n                    children: \"Logo personalizado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 588,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 585,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 21\n              }, this)]\n            }, it.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 flex justify-end items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-bold\",\n                children: [\"Total: $\", getTotalOrder()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportOrder,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 21\n                }, this), \" Guardar Orden (Exportar)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderManagementSystem, \"rP5AKvRHt2UG4Ur7X2E7kkzZUsY=\");\n_c2 = OrderManagementSystem;\nexport default OrderManagementSystem;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProductPreview\");\n$RefreshReg$(_c2, \"OrderManagementSystem\");","map":{"version":3,"names":["React","useEffect","useState","Papa","html2canvas","ExcelJS","saveAs","ShoppingCart","Save","Trash2","Eye","Plus","FileText","User","ChevronLeft","ChevronRight","jsxDEV","_jsxDEV","ProductPreview","product","color","logo","logoPos","imageUrl","onClickPosition","id","width","height","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","backgroundColor","borderRadius","position","display","alignItems","justifyContent","overflow","src","image","alt","name","maxWidth","maxHeight","objectFit","left","x","top","y","transform","pointerEvents","_c","OrderManagementSystem","_s","products","setProducts","selectedProduct","setSelectedProduct","selectedSize","setSelectedSize","quantity","setQuantity","logoFile","setLogoFile","logoPosition","setLogoPosition","orderItems","setOrderItems","customerInfo","setCustomerInfo","companyName","contact","phone","email","deliveryDate","ordersStats","pending","inProcess","completed","fetch","then","r","text","csvText","parse","header","skipEmptyLines","complete","result","parsed","data","prods","map","row","i","basePrice","parseFloat","price","type","length","catch","err","console","warn","handleLogoUpload","e","_e$target$files","f","target","files","reader","FileReader","onload","readAsDataURL","handlePreviewClickPosition","el","currentTarget","getBoundingClientRect","clientX","clientY","handleAddToOrder","newItem","Date","now","size","subtotal","prev","updateOrderItem","field","value","it","updated","q","Number","removeOrderItem","filter","getTotalOrder","reduce","s","capturePreviewAsBlob","elementId","document","getElementById","canvas","scale","Promise","resolve","toBlob","b","exportOrder","alert","orderId","orderMeta","customer","items","total","status","createdAt","toISOString","imageFiles","item","blob","filename","push","workbook","Workbook","worksheet","addWorksheet","columns","key","forEach","idx","addRow","productName","linkImg","buffer","xlsx","writeBuffer","Blob","onChange","findIndex","p","newIdx","find","min","accept","marginRight","flex","_c2","$RefreshReg$"],"sources":["C:/Users/Malu/Downloads/OrderSys-Coinsa/src/components/order-management-system.tsx"],"sourcesContent":["import React, { useEffect, useState, ChangeEvent } from \"react\";\nimport Papa from \"papaparse\";\nimport html2canvas from \"html2canvas\";\nimport ExcelJS from \"exceljs\";\nimport { saveAs } from \"file-saver\";\n\nimport {\n  ShoppingCart,\n  Upload,\n  Edit3,\n  Save,\n  Trash2,\n  Eye,\n  Plus,\n  FileText,\n  Calendar,\n  User,\n  Phone,\n  Mail,\n  Package,\n  ChevronLeft,\n  ChevronRight\n} from \"lucide-react\";\n\n/* ===========================\n  Interfaces / Types\n   =========================== */\n\ninterface Product {\n  id: number;\n  name: string;\n  basePrice: number;\n  image: string; // path in public (e.g. /images/shirt.png)\n  type?: string;\n}\n\ninterface OrderItem {\n  id: number;\n  product: Product;\n  color: \"#FFFFFF\"; // solicitado: literal blanco\n  size: string;\n  quantity: number;\n  logo: string | null; // base64 data URL\n  logoPosition: { x: number; y: number }; // pixels relative to preview box\n  subtotal: number;\n}\n\ninterface CustomerInfo {\n  companyName: string;\n  contact: string;\n  phone: string;\n  email: string;\n  deliveryDate: string;\n}\n\ninterface Order {\n  id: number;\n  customer: CustomerInfo;\n  items: OrderItem[];\n  total: number;\n  status: string;\n  createdAt: string;\n}\n\n/* ===========================\n  Helper components\n   =========================== */\n\ntype ProductPreviewProps = {\n  product: Product | null;\n  color: \"#FFFFFF\";\n  logo: string | null;\n  logoPos: { x: number; y: number };\n  imageUrl?: string;\n  onClickPosition?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  id?: string;\n};\n\nconst ProductPreview: React.FC<ProductPreviewProps> = ({\n  product,\n  color,\n  logo,\n  logoPos,\n  imageUrl,\n  onClickPosition,\n  id\n}) => {\n  // fixed box size used for html2canvas capture consistency\n  const width = 400;\n  const height = 400;\n\n  if (!product) {\n    return (\n      <div className=\"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center\">\n        <p className=\"text-gray-400\">Selecciona un producto</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      id={id}\n      onClick={onClickPosition}\n      style={{\n        width,\n        height,\n        backgroundColor: color,\n        borderRadius: 8,\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        overflow: \"hidden\",\n      }}\n    >\n      <img\n        src={imageUrl || product.image}\n        alt={product.name}\n        style={{ maxWidth: \"100%\", maxHeight: \"100%\", objectFit: \"contain\" }}\n      />\n      {logo && (\n        <img\n          src={logo}\n          alt=\"logo\"\n          style={{\n            position: \"absolute\",\n            left: logoPos.x,\n            top: logoPos.y,\n            width: 80,\n            height: 80,\n            transform: \"translate(-50%, -50%)\",\n            pointerEvents: \"none\",\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\n/* ===========================\n  Main component\n   =========================== */\n\nconst OrderManagementSystem: React.FC = () => {\n  // Products / UI state\n  const [products, setProducts] = useState<Product[]>([]);\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n  const [selectedSize, setSelectedSize] = useState<string>(\"M\");\n  const [quantity, setQuantity] = useState<number>(1);\n\n  // Logo & position editing (for preview before adding)\n  const [logoFile, setLogoFile] = useState<string | null>(null);\n  const [logoPosition, setLogoPosition] = useState({ x: 200, y: 200 }); // px inside preview box\n\n  // Order items and customer\n  const [orderItems, setOrderItems] = useState<OrderItem[]>([]);\n  const [customerInfo, setCustomerInfo] = useState<CustomerInfo>({\n    companyName: \"\",\n    contact: \"\",\n    phone: \"\",\n    email: \"\",\n    deliveryDate: \"\",\n  });\n\n  // Simple dashboard numbers\n  const [ordersStats] = useState({ pending: 12, inProcess: 8, completed: 45 });\n\n  /* ---------------------------\n    Load products from CSV\n    CSV must be in public/products.csv\n    columns: name,basePrice,image,type (image like /images/shirt.png)\n     --------------------------- */\n  useEffect(() => {\n    fetch(\"/products.csv\")\n      .then((r) => r.text())\n      .then((csvText) => {\n        Papa.parse(csvText, {\n          header: true,\n          skipEmptyLines: true,\n          complete: (result) => {\n            const parsed = result.data as any[];\n            const prods: Product[] = parsed.map((row, i) => ({\n              id: i + 1,\n              name: row.name || row.product || `Producto ${i + 1}`,\n              basePrice: parseFloat(row.basePrice || row.price || 0),\n              image: row.image || \"/imgs/placeholder.png\",\n              type: row.type || \"\",\n            }));\n            setProducts(prods);\n            if (prods.length > 0) setSelectedProduct(prods[0]);\n          },\n        });\n      })\n      .catch((err) => {\n        console.warn(\"No se pudo cargar products.csv:\", err);\n      });\n  }, []);\n\n  /* ---------------------------\n    Handlers\n     --------------------------- */\n  const handleLogoUpload = (e: ChangeEvent<HTMLInputElement>) => {\n    const f = e.target.files?.[0];\n    if (!f) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      setLogoFile(reader.result as string);\n      // center logo initial\n      setLogoPosition({ x: 200, y: 200 });\n    };\n    reader.readAsDataURL(f);\n  };\n\n  const handlePreviewClickPosition = (e: React.MouseEvent<HTMLDivElement>) => {\n    // compute position relative to element\n    const el = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - el.left;\n    const y = e.clientY - el.top;\n    setLogoPosition({ x, y });\n  };\n\n  const handleAddToOrder = () => {\n    if (!selectedProduct) return;\n    const newItem: OrderItem = {\n      id: Date.now(),\n      product: selectedProduct,\n      color: \"#FFFFFF\",\n      size: selectedSize,\n      quantity: quantity > 0 ? quantity : 1,\n      logo: logoFile,\n      logoPosition,\n      subtotal: (quantity > 0 ? quantity : 1) * selectedProduct.basePrice,\n    };\n    setOrderItems((prev) => [...prev, newItem]);\n    // reset local preview values\n    setLogoFile(null);\n    setLogoPosition({ x: 200, y: 200 });\n    setQuantity(1);\n    // keep selectedProduct (optional) - left as is for quick add\n  };\n\n  const updateOrderItem = (id: number, field: keyof OrderItem, value: any) => {\n    setOrderItems((prev) =>\n      prev.map((it) => {\n        if (it.id !== id) return it;\n        const updated = { ...it, [field]: value } as OrderItem;\n        if (field === \"quantity\") {\n          const q = Number(value) || 0;\n          updated.subtotal = updated.product.basePrice * q;\n          updated.quantity = q;\n        }\n        return updated;\n      })\n    );\n  };\n\n  const removeOrderItem = (id: number) => {\n    setOrderItems((prev) => prev.filter((it) => it.id !== id));\n  };\n\n  const getTotalOrder = () => orderItems.reduce((s, it) => s + it.subtotal, 0);\n\n  /* ---------------------------\n    Export helpers: capture previews (html2canvas) and export images + excel\n    This runs entirely in browser: generates image blobs and an Excel workbook,\n    then triggers downloads.\n     --------------------------- */\n\n  // capture a preview element by DOM id and return a Blob (png)\n  const capturePreviewAsBlob = async (elementId: string): Promise<Blob | null> => {\n    const el = document.getElementById(elementId);\n    if (!el) return null;\n    // use scale for better resolution\n    const canvas = await html2canvas(el as HTMLElement, { scale: 2 });\n    return await new Promise<Blob | null>((resolve) =>\n      canvas.toBlob((b) => resolve(b), \"image/png\")\n    );\n  };\n\n  const exportOrder = async () => {\n    if (orderItems.length === 0) {\n      alert(\"No puedes guardar una orden sin productos.\");\n      return;\n    }\n\n    // Build order metadata\n    const orderId = Date.now();\n    const now = new Date();\n    const orderMeta: Order = {\n      id: orderId,\n      customer: { ...customerInfo },\n      items: orderItems,\n      total: getTotalOrder(),\n      status: \"Pendiente\",\n      createdAt: now.toISOString(),\n    };\n\n    // 1) Capture each item preview and collect blobs\n    const imageFiles: { filename: string; blob: Blob }[] = [];\n    for (let i = 0; i < orderItems.length; i++) {\n      const item = orderItems[i];\n      const elementId = `preview-${item.id}`; // each item preview must have this id in DOM\n      const blob = await capturePreviewAsBlob(elementId);\n      if (blob) {\n        const filename = `order-${orderId}-${i + 1}.png`;\n        imageFiles.push({ filename, blob });\n        // trigger automatic download of image (so user has copy)\n        saveAs(blob, filename);\n      } else {\n        console.warn(\"No se capturó preview para item\", item.id);\n      }\n    }\n\n    // 2) Build an Excel workbook with order rows\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet(\"Orders\");\n\n    worksheet.columns = [\n      { header: \"ID\", key: \"id\", width: 18 },\n      { header: \"companyName\", key: \"companyName\", width: 25 },\n      { header: \"contact\", key: \"contact\", width: 20 },\n      { header: \"phone\", key: \"phone\", width: 15 },\n      { header: \"email\", key: \"email\", width: 25 },\n      { header: \"deliveryDate\", key: \"deliveryDate\", width: 18 },\n      { header: \"productName\", key: \"productName\", width: 25 },\n      { header: \"linkImg\", key: \"linkImg\", width: 30 },\n      { header: \"color\", key: \"color\", width: 10 },\n      { header: \"size\", key: \"size\", width: 10 },\n      { header: \"quantity\", key: \"quantity\", width: 10 },\n      { header: \"basePrice\", key: \"basePrice\", width: 12 },\n      { header: \"subtotal\", key: \"subtotal\", width: 12 },\n      { header: \"status\", key: \"status\", width: 12 },\n    ];\n\n    // Add one row per item\n    orderItems.forEach((item, idx) => {\n      const filename = `order-${orderId}-${idx + 1}.png`;\n      worksheet.addRow({\n        id: `${orderId}-${idx + 1}`,\n        companyName: orderMeta.customer.companyName,\n        contact: orderMeta.customer.contact,\n        phone: orderMeta.customer.phone,\n        email: orderMeta.customer.email,\n        deliveryDate: orderMeta.customer.deliveryDate || \"\",\n        productName: item.product.name,\n        linkImg: filename, // note: since we download locally, this is the filename reference\n        color: item.color,\n        size: item.size,\n        quantity: item.quantity,\n        basePrice: item.product.basePrice,\n        subtotal: item.subtotal,\n        status: orderMeta.status,\n      });\n    });\n\n    // 3) Write workbook to buffer and download\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), `orderData-${orderId}.xlsx`);\n\n    // 4) Optionally clear order after save\n    alert(`Orden ${orderId} exportada. Imágenes y Excel descargados en tu carpeta de Descargas.`);\n    setOrderItems([]);\n    setCustomerInfo({\n      companyName: \"\",\n      contact: \"\",\n      phone: \"\",\n      email: \"\",\n      deliveryDate: \"\",\n    });\n  };\n\n  /* ===========================\n    JSX (UI)\n     =========================== */\n  return (\n    <div className=\"bg-gray-100 min-h-screen p-8 font-sans\">\n      <div className=\"container mx-auto\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-800\">Sistema de Órdenes</h1>\n          <div className=\"flex space-x-4 text-sm font-semibold text-gray-700\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-red-500\">{ordersStats.pending}</span>\n              <span>Pendientes</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-yellow-500\">{ordersStats.inProcess}</span>\n              <span>En Proceso</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">{ordersStats.completed}</span>\n              <span>Completadas</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Layout */}\n        <div className=\"bg-white rounded-xl shadow-xl p-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {/* Customer info */}\n            <div className=\"col-span-1 bg-gray-50 rounded-lg p-6 shadow-sm\">\n              <h2 className=\"text-xl font-bold mb-4 flex items-center\">\n                <User className=\"mr-2\" />\n                Información del Cliente\n              </h2>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"text-sm block mb-1\">Empresa</label>\n                  <input\n                    type=\"text\"\n                    value={customerInfo.companyName}\n                    onChange={(e) => setCustomerInfo({ ...customerInfo, companyName: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-sm block mb-1\">Contacto</label>\n                  <input\n                    type=\"text\"\n                    value={customerInfo.contact}\n                    onChange={(e) => setCustomerInfo({ ...customerInfo, contact: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-sm block mb-1\">Teléfono</label>\n                  <input\n                    type=\"tel\"\n                    value={customerInfo.phone}\n                    onChange={(e) => setCustomerInfo({ ...customerInfo, phone: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-sm block mb-1\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={customerInfo.email}\n                    onChange={(e) => setCustomerInfo({ ...customerInfo, email: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-sm block mb-1\">Fecha de entrega</label>\n                  <input\n                    type=\"date\"\n                    value={customerInfo.deliveryDate}\n                    onChange={(e) => setCustomerInfo({ ...customerInfo, deliveryDate: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Product selector & preview */}\n            <div className=\"col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n                <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n                  <ShoppingCart className=\"mr-2\" />\n                  Selección del Producto\n                </h3>\n\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <button\n                    onClick={() => {\n                      if (!products.length) return;\n                      const idx = products.findIndex((p) => p.id === selectedProduct?.id);\n                      const newIdx = (idx - 1 + products.length) % products.length;\n                      setSelectedProduct(products[newIdx]);\n                    }}\n                    className=\"p-2 rounded bg-gray-100\"\n                  >\n                    <ChevronLeft />\n                  </button>\n\n                  <div className=\"flex-1 text-center\">\n                    <select\n                      value={selectedProduct?.id || \"\"}\n                      onChange={(e) => {\n                        const id = Number(e.target.value);\n                        const p = products.find((x) => x.id === id) || null;\n                        setSelectedProduct(p);\n                      }}\n                      className=\"w-full px-3 py-2 border rounded\"\n                    >\n                      {products.map((p) => (\n                        <option key={p.id} value={p.id}>\n                          {p.name} — ${p.basePrice}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      if (!products.length) return;\n                      const idx = products.findIndex((p) => p.id === selectedProduct?.id);\n                      const newIdx = (idx + 1) % products.length;\n                      setSelectedProduct(products[newIdx]);\n                    }}\n                    className=\"p-2 rounded bg-gray-100\"\n                  >\n                    <ChevronRight />\n                  </button>\n                </div>\n\n                <div className=\"mb-4\">\n                  <label className=\"text-sm block mb-1\">Talla</label>\n                  <select value={selectedSize} onChange={(e) => setSelectedSize(e.target.value)} className=\"w-full px-3 py-2 border rounded\">\n                    <option value=\"XS\">XS</option>\n                    <option value=\"S\">S</option>\n                    <option value=\"M\">M</option>\n                    <option value=\"L\">L</option>\n                    <option value=\"XL\">XL</option>\n                  </select>\n                </div>\n\n                <div className=\"mb-4\">\n                  <label className=\"text-sm block mb-1\">Cantidad</label>\n                  <input type=\"number\" min={1} value={quantity} onChange={(e) => setQuantity(Number(e.target.value) || 1)} className=\"w-full px-3 py-2 border rounded\" />\n                </div>\n\n                <div className=\"mb-4\">\n                  <label className=\"text-sm block mb-1\">Logo del cliente</label>\n                  <div className=\"flex items-center space-x-2\">\n                    <input type=\"file\" accept=\"image/*\" onChange={handleLogoUpload} />\n                    {logoFile && <img src={logoFile} alt=\"logo\" style={{ width: 40, height: 40, objectFit: \"cover\" }} />}\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">Haz clic en la vista previa para posicionar el logo.</p>\n                </div>\n\n                <div className=\"mt-4\">\n                  <button onClick={handleAddToOrder} className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex items-center justify-center\">\n                    <Plus className=\"mr-2\" /> Agregar a la Orden\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-lg p-6 shadow-lg flex flex-col items-center\">\n                <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n                  <Eye className=\"mr-2\" /> Vista Previa\n                </h3>\n\n                <div style={{ width: 400, height: 400 }}>\n                  <ProductPreview\n                    product={selectedProduct}\n                    color=\"#FFFFFF\"\n                    logo={logoFile}\n                    logoPos={logoPosition}\n                    onClickPosition={handlePreviewClickPosition}\n                    imageUrl={selectedProduct?.image}\n                    id={\"preview-selected\"}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Order items summary */}\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-bold mb-4 flex items-center\"><FileText className=\"mr-2\" /> Resumen de la Orden</h2>\n\n            {orderItems.length === 0 ? (\n              <p className=\"text-gray-500\">No hay productos en la orden.</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {orderItems.map((it, idx) => (\n                  <div key={it.id} className=\"flex items-center bg-white rounded p-4 shadow\">\n                    <div id={`preview-${it.id}`} style={{ width: 120, height: 120, marginRight: 12 }}>\n                      <ProductPreview product={it.product} color={it.color} logo={it.logo} logoPos={it.logoPosition} imageUrl={it.product.image} />\n                    </div>\n                    <div style={{ flex: 1 }}>\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <div className=\"font-semibold\">{it.product.name}</div>\n                          <div className=\"text-sm text-gray-600\">Talla: {it.size}</div>\n                          <div className=\"text-sm text-gray-600\">Precio: ${it.product.basePrice}</div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"font-semibold\">${it.subtotal}</div>\n                          <button onClick={() => removeOrderItem(it.id)} className=\"text-red-500 mt-2\"><Trash2 size={16} /></button>\n                        </div>\n                      </div>\n\n                      <div className=\"mt-3 flex items-center space-x-2\">\n                        <label className=\"text-sm\">Cantidad</label>\n                        <input type=\"number\" min={1} value={it.quantity} onChange={(e) => updateOrderItem(it.id, \"quantity\", Number(e.target.value) || 1)} className=\"w-20 px-2 py-1 border rounded\" />\n                        {it.logo && <span className=\"text-sm text-green-600 ml-4\">Logo personalizado</span>}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                <div className=\"mt-4 flex justify-end items-center space-x-4\">\n                  <div className=\"text-xl font-bold\">Total: ${getTotalOrder()}</div>\n                  <button onClick={exportOrder} className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center\">\n                    <Save className=\"mr-2\" /> Guardar Orden (Exportar)\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderManagementSystem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}